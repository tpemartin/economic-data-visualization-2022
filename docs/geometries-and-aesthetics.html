<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第 2 章 Geometries and Aesthetics | Economic Data Visualization</title>
  <meta name="description" content="第 2 章 Geometries and Aesthetics | Economic Data Visualization" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="第 2 章 Geometries and Aesthetics | Economic Data Visualization" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="第 2 章 Geometries and Aesthetics | Economic Data Visualization" />
  
  
  

<meta name="author" content="Dr. Lin, Mau-Ting" />


<meta name="date" content="2021-01-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="layers.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link id="img-1-attachment" rel="attachment" href="libs/img-1/"/>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-104915016-7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-104915016-7');

  // ga('set', 'userId', 'USER_ID'); // Set the user ID using signed-in user_id.
</script>
<script src="https://unpkg.com/@popperjs/core@2"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">經濟資料視覺化處理</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#packages"><i class="fa fa-check"></i><b>1.1</b> Packages</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#start-a-project"><i class="fa fa-check"></i><b>1.2</b> Start a project</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#setup-environment"><i class="fa fa-check"></i><b>1.3</b> Setup environment</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#otherSoftware"><i class="fa fa-check"></i><b>1.4</b> 其他</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html"><i class="fa fa-check"></i><b>2</b> Geometries and Aesthetics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#an-example"><i class="fa fa-check"></i><b>2.1</b> An Example</a></li>
<li class="chapter" data-level="2.2" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#geom-layers"><i class="fa fa-check"></i><b>2.2</b> Geom layers</a></li>
<li class="chapter" data-level="2.3" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#encapsulation"><i class="fa fa-check"></i><b>2.3</b> Encapsulation</a></li>
<li class="chapter" data-level="2.4" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#build-a-plot-object"><i class="fa fa-check"></i><b>2.4</b> Build a plot object</a></li>
<li class="chapter" data-level="2.5" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#properties-and-methods"><i class="fa fa-check"></i><b>2.5</b> Properties and Methods</a></li>
<li class="chapter" data-level="2.6" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#plot-constructor"><i class="fa fa-check"></i><b>2.6</b> Plot constructor</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#econdv2ggdash"><i class="fa fa-check"></i><b>2.6.1</b> econDV2::ggdash</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#graph-export"><i class="fa fa-check"></i><b>2.7</b> Graph export</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="layers.html"><a href="layers.html"><i class="fa fa-check"></i><b>3</b> Layers</a>
<ul>
<li class="chapter" data-level="3.1" data-path="layers.html"><a href="layers.html#time-series-data"><i class="fa fa-check"></i><b>3.1</b> Time series data</a></li>
<li class="chapter" data-level="3.2" data-path="layers.html"><a href="layers.html#aesthetics-inheritance"><i class="fa fa-check"></i><b>3.2</b> Aesthetics inheritance</a></li>
<li class="chapter" data-level="3.3" data-path="layers.html"><a href="layers.html#sequence-of-layers"><i class="fa fa-check"></i><b>3.3</b> Sequence of layers</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="layers.html"><a href="layers.html#line-stroke"><i class="fa fa-check"></i><b>3.3.1</b> Line stroke</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="layers.html"><a href="layers.html#create-your-first-geom"><i class="fa fa-check"></i><b>3.4</b> Create your first geom</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="layers.html"><a href="layers.html#layer-adding"><i class="fa fa-check"></i><b>3.4.1</b> Layer adding</a></li>
<li class="chapter" data-level="3.4.2" data-path="layers.html"><a href="layers.html#new-geom-function"><i class="fa fa-check"></i><b>3.4.2</b> New geom function</a></li>
<li class="chapter" data-level="3.4.3" data-path="layers.html"><a href="layers.html#dot-dot-dot"><i class="fa fa-check"></i><b>3.4.3</b> dot-dot-dot</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="layers.html"><a href="layers.html#summary"><i class="fa fa-check"></i><b>3.5</b> Summary</a></li>
<li class="chapter" data-level="3.6" data-path="layers.html"><a href="layers.html#exercise"><i class="fa fa-check"></i><b>3.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="categorical-data.html"><a href="categorical-data.html"><i class="fa fa-check"></i><b>4</b> Categorical data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="categorical-data.html"><a href="categorical-data.html#aesthetics-group"><i class="fa fa-check"></i><b>4.1</b> Aesthetics: group</a></li>
<li class="chapter" data-level="4.2" data-path="categorical-data.html"><a href="categorical-data.html#geom-overlapping"><i class="fa fa-check"></i><b>4.2</b> Geom overlapping</a></li>
<li class="chapter" data-level="4.3" data-path="categorical-data.html"><a href="categorical-data.html#position-stack"><i class="fa fa-check"></i><b>4.3</b> Position: stack</a></li>
<li class="chapter" data-level="4.4" data-path="categorical-data.html"><a href="categorical-data.html#factor"><i class="fa fa-check"></i><b>4.4</b> Factor</a></li>
<li class="chapter" data-level="4.5" data-path="categorical-data.html"><a href="categorical-data.html#proportional-data"><i class="fa fa-check"></i><b>4.5</b> Proportional data</a></li>
<li class="chapter" data-level="4.6" data-path="categorical-data.html"><a href="categorical-data.html#adding-text"><i class="fa fa-check"></i><b>4.6</b> Adding text</a></li>
<li class="chapter" data-level="4.7" data-path="categorical-data.html"><a href="categorical-data.html#more-on-position"><i class="fa fa-check"></i><b>4.7</b> More on position</a></li>
<li class="chapter" data-level="4.8" data-path="categorical-data.html"><a href="categorical-data.html#coordination-flip"><i class="fa fa-check"></i><b>4.8</b> Coordination flip</a></li>
<li class="chapter" data-level="4.9" data-path="categorical-data.html"><a href="categorical-data.html#summary-1"><i class="fa fa-check"></i><b>4.9</b> Summary</a></li>
<li class="chapter" data-level="4.10" data-path="categorical-data.html"><a href="categorical-data.html#exercise-1"><i class="fa fa-check"></i><b>4.10</b> Exercise</a>
<ul>
<li class="chapter" data-level="" data-path="categorical-data.html"><a href="categorical-data.html#section"><i class="fa fa-check"></i>1</a></li>
<li class="chapter" data-level="" data-path="categorical-data.html"><a href="categorical-data.html#section-1"><i class="fa fa-check"></i>2</a></li>
<li class="chapter" data-level="" data-path="categorical-data.html"><a href="categorical-data.html#section-2"><i class="fa fa-check"></i>3</a></li>
<li class="chapter" data-level="" data-path="categorical-data.html"><a href="categorical-data.html#section-3"><i class="fa fa-check"></i>4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="scale.html"><a href="scale.html"><i class="fa fa-check"></i><b>5</b> Scale</a>
<ul>
<li class="chapter" data-level="5.1" data-path="scale.html"><a href="scale.html#legend"><i class="fa fa-check"></i><b>5.1</b> Legend</a></li>
<li class="chapter" data-level="5.2" data-path="scale.html"><a href="scale.html#time-axis"><i class="fa fa-check"></i><b>5.2</b> Time axis</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="scale.html"><a href="scale.html#custom-axis-function"><i class="fa fa-check"></i><b>5.2.1</b> Custom axis function</a></li>
<li class="chapter" data-level="5.2.2" data-path="scale.html"><a href="scale.html#advanced-function"><i class="fa fa-check"></i><b>5.2.2</b> Advanced function</a></li>
<li class="chapter" data-level="5.2.3" data-path="scale.html"><a href="scale.html#time-period"><i class="fa fa-check"></i><b>5.2.3</b> Time period</a></li>
<li class="chapter" data-level="5.2.4" data-path="scale.html"><a href="scale.html#dot-dot-dot-1"><i class="fa fa-check"></i><b>5.2.4</b> dot-dot-dot</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="scale.html"><a href="scale.html#xy-axis"><i class="fa fa-check"></i><b>5.3</b> XY axis</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="scale.html"><a href="scale.html#expansion-and-out-of-bound"><i class="fa fa-check"></i><b>5.3.1</b> Expansion and out-of-bound</a></li>
<li class="chapter" data-level="5.3.2" data-path="scale.html"><a href="scale.html#secondary-axis"><i class="fa fa-check"></i><b>5.3.2</b> Secondary axis</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="scale.html"><a href="scale.html#colorfill"><i class="fa fa-check"></i><b>5.4</b> Color/Fill</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="scale.html"><a href="scale.html#discrete"><i class="fa fa-check"></i><b>5.4.1</b> Discrete</a></li>
<li class="chapter" data-level="5.4.2" data-path="scale.html"><a href="scale.html#continuous"><i class="fa fa-check"></i><b>5.4.2</b> Continuous</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="scale.html"><a href="scale.html#exercise-2"><i class="fa fa-check"></i><b>5.5</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="map.html"><a href="map.html"><i class="fa fa-check"></i><b>6</b> Map</a>
<ul>
<li class="chapter" data-level="6.1" data-path="map.html"><a href="map.html#geographic-geoms"><i class="fa fa-check"></i><b>6.1</b> Geographic geoms</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="map.html"><a href="map.html#point-line-and-polygon"><i class="fa fa-check"></i><b>6.1.1</b> Point, Line and Polygon</a></li>
<li class="chapter" data-level="6.1.2" data-path="map.html"><a href="map.html#multipolygons"><i class="fa fa-check"></i><b>6.1.2</b> Multipolygons</a></li>
<li class="chapter" data-level="6.1.3" data-path="map.html"><a href="map.html#fill-polygons"><i class="fa fa-check"></i><b>6.1.3</b> Fill polygons</a></li>
<li class="chapter" data-level="6.1.4" data-path="map.html"><a href="map.html#application-to-world-map"><i class="fa fa-check"></i><b>6.1.4</b> Application to world map</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="map.html"><a href="map.html#choropleth-map"><i class="fa fa-check"></i><b>6.2</b> Choropleth map</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="map.html"><a href="map.html#backgroup-fill-and-borders"><i class="fa fa-check"></i><b>6.2.1</b> Backgroup fill and borders</a></li>
<li class="chapter" data-level="6.2.2" data-path="map.html"><a href="map.html#choropleth-layer-value-layer"><i class="fa fa-check"></i><b>6.2.2</b> Choropleth layer: value layer</a></li>
<li class="chapter" data-level="6.2.3" data-path="map.html"><a href="map.html#fill-colors"><i class="fa fa-check"></i><b>6.2.3</b> Fill colors</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="map.html"><a href="map.html#map-tile"><i class="fa fa-check"></i><b>6.3</b> Map tile</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="map.html"><a href="map.html#ggmap"><i class="fa fa-check"></i><b>6.3.1</b> ggmap</a></li>
<li class="chapter" data-level="6.3.2" data-path="map.html"><a href="map.html#get_googlemap"><i class="fa fa-check"></i><b>6.3.2</b> get_googlemap</a></li>
<li class="chapter" data-level="6.3.3" data-path="map.html"><a href="map.html#get_stamenmap"><i class="fa fa-check"></i><b>6.3.3</b> get_stamenmap</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="map.html"><a href="map.html#simple-feature"><i class="fa fa-check"></i><b>6.4</b> Simple feature</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="map.html"><a href="map.html#define-simple-features"><i class="fa fa-check"></i><b>6.4.1</b> Define simple features</a></li>
<li class="chapter" data-level="6.4.2" data-path="map.html"><a href="map.html#form-simple-feature-column"><i class="fa fa-check"></i><b>6.4.2</b> Form simple feature column</a></li>
<li class="chapter" data-level="6.4.3" data-path="map.html"><a href="map.html#form-simple-feature-data-frame"><i class="fa fa-check"></i><b>6.4.3</b> Form simple feature data frame</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="map.html"><a href="map.html#import-simple-feature-data"><i class="fa fa-check"></i><b>6.5</b> Import Simple Feature Data</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="map.html"><a href="map.html#from-shp-file"><i class="fa fa-check"></i><b>6.5.1</b> From SHP file</a></li>
<li class="chapter" data-level="6.5.2" data-path="map.html"><a href="map.html#from-osm"><i class="fa fa-check"></i><b>6.5.2</b> From OSM</a></li>
<li class="chapter" data-level="6.5.3" data-path="map.html"><a href="map.html#sf-overlay-ggmap"><i class="fa fa-check"></i><b>6.5.3</b> sf overlay ggmap</a></li>
<li class="chapter" data-level="6.5.4" data-path="map.html"><a href="map.html#data-frame-overlay-ggmap"><i class="fa fa-check"></i><b>6.5.4</b> data frame overlay ggmap</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="map.html"><a href="map.html#taiwan-drug-problem"><i class="fa fa-check"></i><b>6.6</b> Taiwan drug problem</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="map.html"><a href="map.html#縣市底圖"><i class="fa fa-check"></i><b>6.6.1</b> 縣市底圖</a></li>
<li class="chapter" data-level="6.6.2" data-path="map.html"><a href="map.html#各鄉鎮區底圖"><i class="fa fa-check"></i><b>6.6.2</b> 各鄉/鎮/區底圖</a></li>
<li class="chapter" data-level="6.6.3" data-path="map.html"><a href="map.html#stamenmap底圖"><i class="fa fa-check"></i><b>6.6.3</b> stamenmap底圖</a></li>
<li class="chapter" data-level="6.6.4" data-path="map.html"><a href="map.html#毒品破獲"><i class="fa fa-check"></i><b>6.6.4</b> 毒品破獲</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="color.html"><a href="color.html"><i class="fa fa-check"></i><b>7</b> Color</a>
<ul>
<li class="chapter" data-level="7.1" data-path="color.html"><a href="color.html#group-aesthetics"><i class="fa fa-check"></i><b>7.1</b> Group aesthetics</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/tpemartin/110-2-Economic-Data-Visualization" target="blank">Course Github</a></li>
<li><a href="https://www.ntpu.edu.tw/econ" target="blank">國立臺北大學 經濟學系</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Economic Data Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="geometries-and-aesthetics" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">第 2 章</span> Geometries and Aesthetics<a href="geometries-and-aesthetics.html#geometries-and-aesthetics" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<ul>
<li><p><a href="https://ggplot2.tidyverse.org/reference/index.html#section-layers">Available geometries</a></p></li>
<li><p>Two steps:</p>
<ul>
<li><p>Step 1: What geometries do you see?</p></li>
<li><p>Step 2: With a given geometry, what aesthetics do you observe?</p></li>
</ul></li>
</ul>
<hr />
<div style="text-align: center;">
<img src="https://i0.wp.com/cmdlinetips.com/wp-content/uploads/2019/11/scatter_plot_with_ggplot_scale_xy_log10_color.png" style="width: 50%"/>
</div>
<ul>
<li><p>Geometries?</p></li>
<li><p>Aesthetics?</p></li>
</ul>
<hr />
<div style="text-align: center;">
<img src="https://belayeth.com/wp-content/uploads/2021/06/Rplot.png" style="width: 50%"/>
</div>
<hr />
<div style="text-align: center;">
<img src="https://www.r-graph-gallery.com/img/graph/50-51-52-scatter-plot-with-ggplot2.png" style="width: 50%"/>
</div>
<hr />
<div style="text-align: center;">
<img src="https://www.economist.com/img/b/1280/755/90/sites/default/files/images/2021/09/articles/main/20210918_woc289.png" style="width: 50%"/>
</div>
<div id="an-example" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> An Example<a href="geometries-and-aesthetics.html#an-example" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div style="text-align: center;">
<img src="https://www.economist.com/img/b/600/895/90/sites/default/files/images/2021/09/articles/body/20210918_woc287.png" style="width: 50%"/>
</div>
<ul>
<li><p>Geom:<br />
<a href="https://ggplot2.tidyverse.org/reference/geom_point.html"><code>geom_point</code></a>:</p>
<ul>
<li><p>x, y：varies with observations</p></li>
<li><p>color (線框顏色): constant</p></li>
<li><p>stroke (線框粗細): constant</p></li>
<li><p>fill (內部塗色): constant</p></li>
<li><p>size (點的大小): constant</p></li>
</ul>
<p><a href="https://ggplot2.tidyverse.org/reference/geom_text.html#aesthetics"><code>geom_text</code></a>:</p>
<ul>
<li><p>x, y: varies with observations</p></li>
<li><p>label: varies with observations</p></li>
<li><p>hjust (文字水平錨點）：between 0 and 1</p></li>
<li><p>vjust (文字垂直錨點）: between 0 and 1</p></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="geometries-and-aesthetics.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;R6&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;R6&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="geometries-and-aesthetics.html#cb9-1" aria-hidden="true" tabindex="-1"></a>Action <span class="ot">=</span> R6<span class="sc">::</span><span class="fu">R6Class</span>(<span class="st">&quot;Action&quot;</span>,</span>
<span id="cb9-2"><a href="geometries-and-aesthetics.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">public=</span><span class="fu">list</span>(</span>
<span id="cb9-3"><a href="geometries-and-aesthetics.html#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">change=</span><span class="cf">function</span>(data){</span>
<span id="cb9-4"><a href="geometries-and-aesthetics.html#cb9-4" aria-hidden="true" tabindex="-1"></a>      <span class="co"># print(self$data)</span></span>
<span id="cb9-5"><a href="geometries-and-aesthetics.html#cb9-5" aria-hidden="true" tabindex="-1"></a>      data<span class="sc">+</span><span class="dv">3</span></span>
<span id="cb9-6"><a href="geometries-and-aesthetics.html#cb9-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-7"><a href="geometries-and-aesthetics.html#cb9-7" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb9-8"><a href="geometries-and-aesthetics.html#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">lock_objects =</span> F)</span>
<span id="cb9-9"><a href="geometries-and-aesthetics.html#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="geometries-and-aesthetics.html#cb9-10" aria-hidden="true" tabindex="-1"></a>Person <span class="ot">=</span> R6<span class="sc">::</span><span class="fu">R6Class</span>(<span class="st">&quot;Person&quot;</span>,</span>
<span id="cb9-11"><a href="geometries-and-aesthetics.html#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">inherit =</span> Action,</span>
<span id="cb9-12"><a href="geometries-and-aesthetics.html#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">public =</span> <span class="fu">list</span>(</span>
<span id="cb9-13"><a href="geometries-and-aesthetics.html#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span><span class="cn">NULL</span>,</span>
<span id="cb9-14"><a href="geometries-and-aesthetics.html#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">newData=</span><span class="cn">NULL</span>,</span>
<span id="cb9-15"><a href="geometries-and-aesthetics.html#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">initialize =</span> <span class="cf">function</span>(data){</span>
<span id="cb9-16"><a href="geometries-and-aesthetics.html#cb9-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">print</span>(data)</span>
<span id="cb9-17"><a href="geometries-and-aesthetics.html#cb9-17" aria-hidden="true" tabindex="-1"></a>      self<span class="sc">$</span>data<span class="ot">=</span>data</span>
<span id="cb9-18"><a href="geometries-and-aesthetics.html#cb9-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">print</span>(self)</span>
<span id="cb9-19"><a href="geometries-and-aesthetics.html#cb9-19" aria-hidden="true" tabindex="-1"></a>      <span class="co"># invisible(self.data)</span></span>
<span id="cb9-20"><a href="geometries-and-aesthetics.html#cb9-20" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb9-21"><a href="geometries-and-aesthetics.html#cb9-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">changeMyself=</span><span class="cf">function</span>(){</span>
<span id="cb9-22"><a href="geometries-and-aesthetics.html#cb9-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">print</span>(super)</span>
<span id="cb9-23"><a href="geometries-and-aesthetics.html#cb9-23" aria-hidden="true" tabindex="-1"></a>      self<span class="sc">$</span>newData <span class="ot">=</span> Action<span class="sc">$</span>public_methods<span class="sc">$</span><span class="fu">change</span>(self<span class="sc">$</span>data)</span>
<span id="cb9-24"><a href="geometries-and-aesthetics.html#cb9-24" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-25"><a href="geometries-and-aesthetics.html#cb9-25" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb9-26"><a href="geometries-and-aesthetics.html#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="geometries-and-aesthetics.html#cb9-27" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">=</span> Person<span class="sc">$</span><span class="fu">new</span>(<span class="dv">22</span>)</span>
<span id="cb9-28"><a href="geometries-and-aesthetics.html#cb9-28" aria-hidden="true" tabindex="-1"></a>p1<span class="sc">$</span>data</span>
<span id="cb9-29"><a href="geometries-and-aesthetics.html#cb9-29" aria-hidden="true" tabindex="-1"></a>p1<span class="sc">$</span><span class="fu">changeMyself</span>()</span>
<span id="cb9-30"><a href="geometries-and-aesthetics.html#cb9-30" aria-hidden="true" tabindex="-1"></a>p1<span class="sc">$</span>newData</span>
<span id="cb9-31"><a href="geometries-and-aesthetics.html#cb9-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-32"><a href="geometries-and-aesthetics.html#cb9-32" aria-hidden="true" tabindex="-1"></a>Action<span class="sc">$</span>public_methods<span class="sc">$</span>change <span class="ot">&lt;-</span> <span class="cf">function</span>(data) data<span class="sc">**</span><span class="dv">2</span></span>
<span id="cb9-33"><a href="geometries-and-aesthetics.html#cb9-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-34"><a href="geometries-and-aesthetics.html#cb9-34" aria-hidden="true" tabindex="-1"></a>p1<span class="sc">$</span>data</span>
<span id="cb9-35"><a href="geometries-and-aesthetics.html#cb9-35" aria-hidden="true" tabindex="-1"></a>p1<span class="sc">$</span><span class="fu">changeMyself</span>()</span>
<span id="cb9-36"><a href="geometries-and-aesthetics.html#cb9-36" aria-hidden="true" tabindex="-1"></a>p1<span class="sc">$</span>newData</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="geometries-and-aesthetics.html#cb10-1" aria-hidden="true" tabindex="-1"></a>GG <span class="ot">&lt;-</span> R6<span class="sc">::</span><span class="fu">R6Class</span>(</span>
<span id="cb10-2"><a href="geometries-and-aesthetics.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GG&quot;</span>,</span>
<span id="cb10-3"><a href="geometries-and-aesthetics.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">public=</span><span class="fu">list</span>(</span>
<span id="cb10-4"><a href="geometries-and-aesthetics.html#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fields</span></span>
<span id="cb10-5"><a href="geometries-and-aesthetics.html#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span><span class="cn">NULL</span>,</span>
<span id="cb10-6"><a href="geometries-and-aesthetics.html#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">initialize=</span><span class="cf">function</span>(data){</span>
<span id="cb10-7"><a href="geometries-and-aesthetics.html#cb10-7" aria-hidden="true" tabindex="-1"></a>      self<span class="sc">$</span>data <span class="ot">=</span> data;</span>
<span id="cb10-8"><a href="geometries-and-aesthetics.html#cb10-8" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb10-9"><a href="geometries-and-aesthetics.html#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">change=</span><span class="cf">function</span>(){</span>
<span id="cb10-10"><a href="geometries-and-aesthetics.html#cb10-10" aria-hidden="true" tabindex="-1"></a>      self<span class="sc">$</span>data<span class="sc">+</span><span class="dv">4</span></span>
<span id="cb10-11"><a href="geometries-and-aesthetics.html#cb10-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-12"><a href="geometries-and-aesthetics.html#cb10-12" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb10-13"><a href="geometries-and-aesthetics.html#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">lock_objects =</span> F</span>
<span id="cb10-14"><a href="geometries-and-aesthetics.html#cb10-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-15"><a href="geometries-and-aesthetics.html#cb10-15" aria-hidden="true" tabindex="-1"></a>plot1<span class="ot">=</span> GG<span class="sc">$</span><span class="fu">new</span>(<span class="at">data=</span><span class="dv">1</span>)</span>
<span id="cb10-16"><a href="geometries-and-aesthetics.html#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="geometries-and-aesthetics.html#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(GG)</span>
<span id="cb10-18"><a href="geometries-and-aesthetics.html#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(GG)</span>
<span id="cb10-19"><a href="geometries-and-aesthetics.html#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(GG)</span>
<span id="cb10-20"><a href="geometries-and-aesthetics.html#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(plot1)</span>
<span id="cb10-21"><a href="geometries-and-aesthetics.html#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(plot1)</span>
<span id="cb10-22"><a href="geometries-and-aesthetics.html#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="fu">parent.env</span>(plot1)</span></code></pre></div>
</div>
<div id="geom-layers" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Geom layers<a href="geometries-and-aesthetics.html#geom-layers" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The construction of geom layers is normally as:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="geometries-and-aesthetics.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb11-2"><a href="geometries-and-aesthetics.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_xxx</span>()<span class="sc">+</span><span class="fu">geom_yyy</span>()<span class="sc">+</span><span class="fu">geom_zzz</span>()</span></code></pre></div>
<p>It is also acceptable to use them as:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="geometries-and-aesthetics.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb12-2"><a href="geometries-and-aesthetics.html#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="fu">geom_xxx</span>(), <span class="fu">geom_yyy</span>(), <span class="fu">geom_zzz</span>())</span></code></pre></div>
<p>The format later is more flexible for changing geom layer sequence.</p>
<p>Actually other layer of setting can have both format as well.</p>
</div>
<div id="encapsulation" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Encapsulation<a href="geometries-and-aesthetics.html#encapsulation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>At the end of the day we usually want to save certain object and import it later. However, without carefulness of construction, the object’s value will depend on some other object in the global environment. When saving objects, both objects (the target one and it dependent objects) must be saved together.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="geometries-and-aesthetics.html#cb13-1" aria-hidden="true" tabindex="-1"></a>a<span class="ot">=</span><span class="dv">3</span></span>
<span id="cb13-2"><a href="geometries-and-aesthetics.html#cb13-2" aria-hidden="true" tabindex="-1"></a>fun<span class="ot">=</span><span class="cf">function</span>(){a<span class="sc">+</span><span class="dv">4</span>}</span>
<span id="cb13-3"><a href="geometries-and-aesthetics.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(fun, <span class="at">file=</span><span class="st">&quot;myfun.R&quot;</span>)</span></code></pre></div>
<p>Next day you restart rstudio</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="geometries-and-aesthetics.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb14-2"><a href="geometries-and-aesthetics.html#cb14-2" aria-hidden="true" tabindex="-1"></a>fun<span class="ot">=</span><span class="fu">readRDS</span>(<span class="st">&quot;myfun.R&quot;</span>)</span>
<span id="cb14-3"><a href="geometries-and-aesthetics.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fun</span>()</span></code></pre></div>
<p>A better target object should be build so that it encapsulates all information it needs.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="geometries-and-aesthetics.html#cb15-1" aria-hidden="true" tabindex="-1"></a>myFun <span class="ot">=</span> <span class="fu">list</span>()</span>
<span id="cb15-2"><a href="geometries-and-aesthetics.html#cb15-2" aria-hidden="true" tabindex="-1"></a>myFun<span class="sc">$</span>a<span class="ot">=</span><span class="dv">3</span></span>
<span id="cb15-3"><a href="geometries-and-aesthetics.html#cb15-3" aria-hidden="true" tabindex="-1"></a>myFun<span class="sc">$</span>fun <span class="ot">=</span> <span class="cf">function</span>(){myFun<span class="sc">$</span>a<span class="sc">+</span><span class="dv">3</span>}</span>
<span id="cb15-4"><a href="geometries-and-aesthetics.html#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="geometries-and-aesthetics.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(myFun, <span class="at">file=</span><span class="st">&quot;myFun.Rds&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="geometries-and-aesthetics.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb16-2"><a href="geometries-and-aesthetics.html#cb16-2" aria-hidden="true" tabindex="-1"></a>myFun <span class="ot">=</span> <span class="fu">readRDS</span>(<span class="st">&quot;myFun.Rds&quot;</span>)</span>
<span id="cb16-3"><a href="geometries-and-aesthetics.html#cb16-3" aria-hidden="true" tabindex="-1"></a>myFun<span class="sc">$</span><span class="fu">fun</span>()</span></code></pre></div>
</div>
<div id="build-a-plot-object" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Build a plot object<a href="geometries-and-aesthetics.html#build-a-plot-object" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A plot consists of</p>
<ul>
<li><p>Data</p></li>
<li><p>Canvas base (i.e. <code>ggplot()</code>)</p></li>
<li><p>Sequence of geom layers (i.e. <code>geom_xxx</code>)</p></li>
<li><p>Scale adjustment</p></li>
<li><p>theme setting and others</p></li>
</ul>
<p>where geom layers all depends on the data supplied in the plot.</p>
<p>We can build an object called <strong>plot</strong> so that</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="geometries-and-aesthetics.html#cb17-1" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span>data <span class="co"># reveal its data</span></span>
<span id="cb17-2"><a href="geometries-and-aesthetics.html#cb17-2" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span>ggplot <span class="co"># reveal its canvas</span></span>
<span id="cb17-3"><a href="geometries-and-aesthetics.html#cb17-3" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span>geoms <span class="co"># reveal its sequence of geom layers</span></span></code></pre></div>
<p>And whenever we want to visualize our plot model,</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="geometries-and-aesthetics.html#cb18-1" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span><span class="fu">make</span>()</span></code></pre></div>
<p>In object oriented programming (OOP), <code>data, ggplot, geoms</code> are the properties of object <code>plot</code>, and <code>make</code> is a method belonging to the object.</p>
</div>
<div id="properties-and-methods" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Properties and Methods<a href="geometries-and-aesthetics.html#properties-and-methods" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Properties are object attributes that are born to be constant. Like <code>$data</code> attribute. All other elements depends on it. It would be wise the keep the dependency so that when <code>$data</code> updated, all other elements are updated consequently</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="geometries-and-aesthetics.html#cb19-1" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">=</span> <span class="fu">list</span>()</span>
<span id="cb19-2"><a href="geometries-and-aesthetics.html#cb19-2" aria-hidden="true" tabindex="-1"></a>obj<span class="sc">$</span>data<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb19-3"><a href="geometries-and-aesthetics.html#cb19-3" aria-hidden="true" tabindex="-1"></a>obj<span class="sc">$</span>data2 <span class="ot">=</span> obj<span class="sc">$</span>data<span class="sc">+</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb19-4"><a href="geometries-and-aesthetics.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(obj<span class="sc">$</span>data2)</span>
<span id="cb19-5"><a href="geometries-and-aesthetics.html#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="geometries-and-aesthetics.html#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="geometries-and-aesthetics.html#cb19-7" aria-hidden="true" tabindex="-1"></a>obj<span class="sc">$</span>data<span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb19-8"><a href="geometries-and-aesthetics.html#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(obj<span class="sc">$</span>data2)</span></code></pre></div>
<p>To keep the dependency, you need to keep the programming block that produces the dependent objects.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="geometries-and-aesthetics.html#cb20-1" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">=</span> <span class="fu">list</span>()</span>
<span id="cb20-2"><a href="geometries-and-aesthetics.html#cb20-2" aria-hidden="true" tabindex="-1"></a>obj<span class="sc">$</span>data<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb20-3"><a href="geometries-and-aesthetics.html#cb20-3" aria-hidden="true" tabindex="-1"></a>obj<span class="sc">$</span>data2 <span class="ot">=</span> <span class="cf">function</span>(){ obj<span class="sc">$</span>data<span class="sc">+</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">2</span>)}</span>
<span id="cb20-4"><a href="geometries-and-aesthetics.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(obj<span class="sc">$</span><span class="fu">data2</span>())</span>
<span id="cb20-5"><a href="geometries-and-aesthetics.html#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="geometries-and-aesthetics.html#cb20-6" aria-hidden="true" tabindex="-1"></a>obj<span class="sc">$</span>data<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb20-7"><a href="geometries-and-aesthetics.html#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(obj<span class="sc">$</span><span class="fu">data2</span>())</span></code></pre></div>
<p>We want to build a <code>plot</code> object which</p>
<ul>
<li><p>Encapsulates(封裝) all required information.</p></li>
<li><p>Contains source data as its property; and</p></li>
<li><p>All other depending elements are consequential as a function.</p></li>
</ul>
<hr />
<p>For ggplot, we can set</p>
<ul>
<li><p>data, ggplot, and the list of geoms as properties</p></li>
<li><p>make method that creates the visual look.</p></li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="geometries-and-aesthetics.html#cb21-1" aria-hidden="true" tabindex="-1"></a>plot<span class="ot">=</span><span class="fu">list</span>()</span>
<span id="cb21-2"><a href="geometries-and-aesthetics.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># retrieve data properties</span></span>
<span id="cb21-3"><a href="geometries-and-aesthetics.html#cb21-3" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span>data <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">x=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">y=</span><span class="fu">c</span>(<span class="dv">5</span>, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb21-4"><a href="geometries-and-aesthetics.html#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot</span></span>
<span id="cb21-5"><a href="geometries-and-aesthetics.html#cb21-5" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span>ggplot <span class="ot">=</span> <span class="fu">ggplot</span>(<span class="at">data=</span>plot<span class="sc">$</span>data, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y))</span>
<span id="cb21-6"><a href="geometries-and-aesthetics.html#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># list of geoms</span></span>
<span id="cb21-7"><a href="geometries-and-aesthetics.html#cb21-7" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span>geoms <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-8"><a href="geometries-and-aesthetics.html#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">point=</span><span class="fu">geom_point</span>(), <span class="at">line=</span><span class="fu">geom_line</span>()</span>
<span id="cb21-9"><a href="geometries-and-aesthetics.html#cb21-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-10"><a href="geometries-and-aesthetics.html#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co"># make method</span></span>
<span id="cb21-11"><a href="geometries-and-aesthetics.html#cb21-11" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span>make <span class="ot">=</span> <span class="cf">function</span>(){</span>
<span id="cb21-12"><a href="geometries-and-aesthetics.html#cb21-12" aria-hidden="true" tabindex="-1"></a>  plot<span class="sc">$</span>ggplot<span class="sc">+</span>plot<span class="sc">$</span>geoms</span>
<span id="cb21-13"><a href="geometries-and-aesthetics.html#cb21-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-14"><a href="geometries-and-aesthetics.html#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="geometries-and-aesthetics.html#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co"># you can also put a save method</span></span>
<span id="cb21-16"><a href="geometries-and-aesthetics.html#cb21-16" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span>save <span class="ot">=</span> <span class="cf">function</span>(filename){</span>
<span id="cb21-17"><a href="geometries-and-aesthetics.html#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">saveRDS</span>(plot, filename)</span>
<span id="cb21-18"><a href="geometries-and-aesthetics.html#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="fu">paste</span>(<span class="st">&quot;The plot is saved at &quot;</span>, filename))</span>
<span id="cb21-19"><a href="geometries-and-aesthetics.html#cb21-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-20"><a href="geometries-and-aesthetics.html#cb21-20" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span><span class="fu">make</span>()</span>
<span id="cb21-21"><a href="geometries-and-aesthetics.html#cb21-21" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span><span class="fu">save</span>(<span class="st">&quot;myplot.Rds&quot;</span>)</span></code></pre></div>
<p>Or you can create <code>plot</code> via:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="geometries-and-aesthetics.html#cb22-1" aria-hidden="true" tabindex="-1"></a>plot<span class="ot">=</span><span class="fu">list</span>(</span>
<span id="cb22-2"><a href="geometries-and-aesthetics.html#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> ,</span>
<span id="cb22-3"><a href="geometries-and-aesthetics.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ggplot =</span> <span class="fu">ggplot</span>(), </span>
<span id="cb22-4"><a href="geometries-and-aesthetics.html#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">geoms =</span> <span class="fu">list</span>(...) ,</span>
<span id="cb22-5"><a href="geometries-and-aesthetics.html#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">make =</span> <span class="cf">function</span>(){</span>
<span id="cb22-6"><a href="geometries-and-aesthetics.html#cb22-6" aria-hidden="true" tabindex="-1"></a>    plot<span class="sc">$</span>ggplot<span class="sc">+</span>plot<span class="sc">$</span>geoms</span>
<span id="cb22-7"><a href="geometries-and-aesthetics.html#cb22-7" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb22-8"><a href="geometries-and-aesthetics.html#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">save =</span> <span class="cf">function</span>(){</span>
<span id="cb22-9"><a href="geometries-and-aesthetics.html#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">saveRDS</span>(plot, filename)</span>
<span id="cb22-10"><a href="geometries-and-aesthetics.html#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="fu">paste</span>(<span class="st">&quot;The plot is saved at &quot;</span>, filename))</span>
<span id="cb22-11"><a href="geometries-and-aesthetics.html#cb22-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb22-12"><a href="geometries-and-aesthetics.html#cb22-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="plot-constructor" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Plot constructor<a href="geometries-and-aesthetics.html#plot-constructor" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="geometries-and-aesthetics.html#cb23-1" aria-hidden="true" tabindex="-1"></a>Plot <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb23-2"><a href="geometries-and-aesthetics.html#cb23-2" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">=</span> <span class="fu">new.env</span>()</span>
<span id="cb23-3"><a href="geometries-and-aesthetics.html#cb23-3" aria-hidden="true" tabindex="-1"></a>  plot<span class="sc">$</span>data<span class="ot">=</span>data</span>
<span id="cb23-4"><a href="geometries-and-aesthetics.html#cb23-4" aria-hidden="true" tabindex="-1"></a>  plot<span class="sc">$</span>ggplot<span class="ot">=</span><span class="cn">NULL</span></span>
<span id="cb23-5"><a href="geometries-and-aesthetics.html#cb23-5" aria-hidden="true" tabindex="-1"></a>  plot<span class="sc">$</span>geoms<span class="ot">=</span><span class="cn">NULL</span></span>
<span id="cb23-6"><a href="geometries-and-aesthetics.html#cb23-6" aria-hidden="true" tabindex="-1"></a>  plot<span class="sc">$</span>make<span class="ot">=</span><span class="cf">function</span>(){</span>
<span id="cb23-7"><a href="geometries-and-aesthetics.html#cb23-7" aria-hidden="true" tabindex="-1"></a>    plot<span class="sc">$</span>ggplot<span class="sc">+</span>plot<span class="sc">$</span>geoms</span>
<span id="cb23-8"><a href="geometries-and-aesthetics.html#cb23-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-9"><a href="geometries-and-aesthetics.html#cb23-9" aria-hidden="true" tabindex="-1"></a>  plot<span class="sc">$</span>save<span class="ot">=</span><span class="cf">function</span>(){</span>
<span id="cb23-10"><a href="geometries-and-aesthetics.html#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">saveRDS</span>(plot, filename)</span>
<span id="cb23-11"><a href="geometries-and-aesthetics.html#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="fu">paste</span>(<span class="st">&quot;The plot is saved at &quot;</span>, filename))</span>
<span id="cb23-12"><a href="geometries-and-aesthetics.html#cb23-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-13"><a href="geometries-and-aesthetics.html#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(plot)</span>
<span id="cb23-14"><a href="geometries-and-aesthetics.html#cb23-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="geometries-and-aesthetics.html#cb24-1" aria-hidden="true" tabindex="-1"></a>myTools <span class="ot">=</span> <span class="fu">new.env</span>()</span>
<span id="cb24-2"><a href="geometries-and-aesthetics.html#cb24-2" aria-hidden="true" tabindex="-1"></a>myTools<span class="sc">$</span>Plot <span class="ot">&lt;-</span> Plot</span>
<span id="cb24-3"><a href="geometries-and-aesthetics.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(myTools)</span></code></pre></div>
<!--

## Object Oriented Programming
Since we are likely to create plot object with the same properties and methods, we can define a class. Each plot object is generated from the class constructor. 

```r
Plot = R6::R6Class("Plot",
  public=list(
        data = NULL,
        ggplot = NULL,
        geoms = NULL ,
        initialize = function(data){
          self$data=data
        },
        make = function(){
          self$ggplot+self$geoms
        },
        save = function(){
          saveRDS(plot, filename)
          message(paste("The plot is saved at ", filename))
        }
))
```

  * construct a class called "Plot"
  
  * create (initialize) a Plot class object `Plot$new(...)`
  

```r
# create and initiali
plot = Plot$new(
  data=data.frame(x=c(1,2), y=c(5, -1)))

# ggplot
plot$ggplot = ggplot(data=plot$data, aes(x=x, y=y))
# list of geoms
plot$geoms = list(
  point=geom_point(), line=geom_line()
)

plot$make()
```


-->
<div id="econdv2ggdash" class="section level3 hasAnchor" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> econDV2::ggdash<a href="geometries-and-aesthetics.html#econdv2ggdash" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>At every aesthetic element to be adjusted, attach <code>#input${aesthetic_name}</code> at the end of the line as:</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="geometries-and-aesthetics.html#cb25-1" aria-hidden="true" tabindex="-1"></a>plot2 <span class="ot">=</span> Plot<span class="sc">$</span><span class="fu">new</span>(<span class="fu">data.frame</span>(<span class="at">x=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">y=</span><span class="fu">c</span>(<span class="dv">5</span>, <span class="sc">-</span><span class="dv">1</span>)))</span>
<span id="cb25-2"><a href="geometries-and-aesthetics.html#cb25-2" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span>ggplot<span class="ot">=</span><span class="fu">ggplot</span>(<span class="at">data=</span>plot<span class="sc">$</span>data)</span>
<span id="cb25-3"><a href="geometries-and-aesthetics.html#cb25-3" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span>geoms<span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb25-4"><a href="geometries-and-aesthetics.html#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb25-5"><a href="geometries-and-aesthetics.html#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y),</span>
<span id="cb25-6"><a href="geometries-and-aesthetics.html#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span><span class="st">&quot;red&quot;</span>, <span class="co">#input$color</span></span>
<span id="cb25-7"><a href="geometries-and-aesthetics.html#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">size=</span><span class="dv">3</span> <span class="co">#input$size</span></span>
<span id="cb25-8"><a href="geometries-and-aesthetics.html#cb25-8" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb25-9"><a href="geometries-and-aesthetics.html#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb25-10"><a href="geometries-and-aesthetics.html#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y)</span>
<span id="cb25-11"><a href="geometries-and-aesthetics.html#cb25-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-12"><a href="geometries-and-aesthetics.html#cb25-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-13"><a href="geometries-and-aesthetics.html#cb25-13" aria-hidden="true" tabindex="-1"></a>plot<span class="sc">$</span><span class="fu">make</span>()</span></code></pre></div>
</div>
</div>
<div id="graph-export" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Graph export<a href="geometries-and-aesthetics.html#graph-export" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The easiest way to export the graph as you see on <code>gg$dash()</code> is to right click the image on the shiny dashboard and choose <strong>save image as</strong> to export the image.</p>

</div>
</div>
<style>
.exercise {
    background-color: PaleGreen;
}
</style>
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'ntpuecon/111-1-econDV'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
<style>
  .gitter-open-chat-button {
    right: 50px;
  }
  .gitter-chat-embed-action-bar-item-collapse-chat {
    margin-right: 50px;
  }
</style>
<!--參考答案開關--> 
<script>
$(document).ready(function(){
  $('<button class="flip">More info...</button>').insertBefore(".more");
  $(".flip").click(function(){
    $(this).next().slideToggle();
  });
})
</script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="js/bootstrap.min.js"></script>

<!-- 2. Include library -->
<script src="js/clipboard.min.js"></script>

<!-- 3. Instantiate clipboard by passing a string selector -->

<script>
var clipboard = new Clipboard('.btn');
clipboard.on('success', function(e) {
    console.log(e);
});
clipboard.on('error', function(e) {
    console.log(e);
});
</script>

<script>
  var copyTextareaBtn = document.querySelector('.js-textareacopybtn');

copyTextareaBtn.addEventListener('click', function(event) {
  var copyTextarea = document.querySelector('.js-copytextarea');
  copyTextarea.select();

  try {
    var successful = document.execCommand('copy');
    var msg = successful ? 'successful' : 'unsuccessful';
    console.log('Copying text command was ' + msg);
  } catch (err) {
    console.log('Oops, unable to copy');
  }
});
</script>

<script>
  function CopyToClipboard(containerid) {
if (document.selection) {
    var range = document.body.createTextRange();
    range.moveToElementText(document.getElementById(containerid));
    range.select().createTextRange();
    document.execCommand("copy");

} else if (window.getSelection) {
    var range = document.createRange();
     range.selectNode(document.getElementById(containerid));
     window.getSelection().addRange(range);
     document.execCommand("copy");
     alert("text copied")
}}
</script>

<script>
  $( document ).ready(function() {
    addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
});
</script>
<!--
<script>
  $(document).ready(function() {
  var codes = document.querySelectorAll('pre:not([class])');
  var code, i, d, s, p;
  for (i = 0; i < codes.length; i++) {
    code = codes[i];
    p = code.parentNode;
    d = document.createElement('details');
    s = document.createElement('summary');
    s.innerText = 'Details';
    // <details><summary>Details</summary></details>
    d.appendChild(s);
    // move the code into <details>
    p.replaceChild(d, code);
    d.appendChild(code);
  }
});
</script>
-->
<!--
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'https://gitter.im/NTPU-Econ/Econometrics'
  };
</script>

<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
-->
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="layers.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"theme": "united"
});
});
</script>

</body>

</html>
